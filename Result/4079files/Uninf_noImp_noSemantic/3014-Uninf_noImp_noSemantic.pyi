import asyncio
import bottom
from MoMMI.handler import MHandler
from MoMMI.server import MChannel
from discord import Message, User
from typing import Any, Callable, List, Match

last_messages: List[str]
IrcTransformType: Any

def irc_transform(name: str) -> Callable[[IrcTransformType], None]: ...

class MIrcTransform(MHandler):
    func: Any = ...
    def __init__(self, name: str, module: str, func: IrcTransformType) -> None: ...
    async def transform(self, message: str, author: User, irc_client: bottom.Client, discord_server: MChannel) -> str: ...

DiscordTransformType: Any

def discord_transform(name: str) -> Callable[[DiscordTransformType], None]: ...

class MDiscordTransform(MHandler):
    func: Any = ...
    def __init__(self, name: str, module: str, func: DiscordTransformType) -> None: ...
    async def transform(self, message: str, author: str, discord_server: MChannel, irc_client: bottom.Client) -> str: ...

logger: Any
messagelogger: Any
MENTION_RE: Any
ROLE_RE: Any
CHANNEL_RE: Any
EMOJI_RE: Any
IRC_MENTION_RE: Any
IGNORED_NAMES: Any

class IrcConnection:
    name: Any = ...
    address: Any = ...
    port: Any = ...
    username: Any = ...
    realname: Any = ...
    nick: Any = ...
    server_password: Any = ...
    channels: Any = ...
    client: Any = ...
    def __init__(self, name: str) -> None: ...
    async def connect(self, **kwargs: Any) -> None: ...
    def keepalive(self, message: str, **kwargs: Any) -> None: ...
    async def message(self, nick: str, target: str, message: str, **kwargs: Any) -> None: ...
    def get_discord_channel(self, irc: str) -> MChannel: ...

async def load(loop: asyncio.AbstractEventLoop) -> None: ...
async def unload(loop: asyncio.AbstractEventLoop) -> None: ...
async def ircrelay(channel: MChannel, match: Match, message: Message) -> None: ...
def prevent_ping(name: str) -> str: ...
async def convert_disc_mention(message: str, author: User, irc_client: bottom.Client, channel: MChannel) -> str: ...
async def convert_disc_channel(message: str, author: User, irc_client: bottom.Client, channel: MChannel) -> str: ...
async def convert_role_mention(message: str, author: User, irc_client: bottom.Client, channel: MChannel) -> str: ...
async def convert_custom_emoji(message: str, author: User, irc_client: bottom.Client, channel: MChannel) -> str: ...
async def convert_irc_mention(message: str, author: str, channel: MChannel, irc_client: bottom.Client) -> str: ...

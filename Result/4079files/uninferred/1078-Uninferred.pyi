from pyprovide import Injector
from typing import Any, Callable, Iterable, Type, TypeVar

_logger: Any
T = TypeVar('T')

class Event:
    _last_event_id: int = ...
    _event_id_lock: Any = ...
    event_id: Any = ...
    def __init__(self) -> None: ...
    def __str__(self) -> str: ...

class EventHandler:
    handled_event_class: Any = ...
    def accept(self, event: Event) -> bool: ...
    def handle(self, event: Event) -> None: ...
    def __str__(self) -> str: ...

class EventManager:
    injector: Any = ...
    _handlers: Any = ...
    _event_queue: Any = ...
    def __init__(self, injector: Injector) -> None: ...
    def _event_thread_target(self) -> None: ...
    @staticmethod
    def _event_handle_target(handler: EventHandler, event: Event) -> None: ...
    def register_event_handler(self, event_class: Type[T], handler: Callable[[T], None]) -> None: ...
    def register_event_handlers(self, *event_handlers: EventHandler) -> None: ...
    def register_event_handler_classes(self, *event_handler_classes: Type[EventHandler]) -> None: ...
    def register_all_event_handlers(self, mod: Any) -> None: ...
    @staticmethod
    def _get_classes_in_module(mod: Any) -> Iterable[Type[EventHandler]]: ...
    def dispatch_event(self, event: Event) -> None: ...

class NewSubmissionsEvent(Event): ...

class SubmissionStartedEvent(Event):
    submission_id: Any = ...
    def __init__(self, submission_id: int) -> None: ...
    def __str__(self) -> str: ...

class SubmissionFinishedEvent(Event):
    submission_id: Any = ...
    def __init__(self, submission_id: int) -> None: ...
    def __str__(self) -> str: ...

class EndOfSubmissionsEvent(Event): ...

class SubmissionGradeExternallyUpdatedEvent(Event):
    submission_id: Any = ...
    def __init__(self, submission_id: int) -> None: ...
    def __str__(self) -> str: ...

class AuthRequestedEvent(Event):
    request_details: Any = ...
    def __init__(self, request_details: str) -> None: ...

class AuthGrantedEvent(Event):
    auth_event_id: Any = ...
    def __init__(self, auth_event_id: int) -> None: ...
    def __str__(self) -> str: ...
